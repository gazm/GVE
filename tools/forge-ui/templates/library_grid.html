{% if items %}
{% for item in items %}
<div class="library-card" data-id="{{ item.id }}" data-type="{{ library_type }}">
    <div class="card-preview">
        {% if library_type == 'geometry' %}
        <div class="preview-3d">â—‡</div>
        {% elif library_type == 'textures' %}
        <div class="preview-texture">â–¦</div>
        {% elif library_type == 'materials' %}
        <div class="preview-material">â—ˆ</div>
        {% elif library_type == 'audio' %}
        <div class="preview-audio">â™«</div>
        {% elif library_type == 'recipes' %}
        <div class="preview-recipe">â–£</div>
        {% endif %}
    </div>
    
    <div class="card-body">
        <h3 class="card-name">{{ item.name }}</h3>
        <div class="card-tags">
            {% for tag in item.tags[:3] %}
            <span class="tag-mini">{{ tag }}</span>
            {% endfor %}
            {% if item.tags|length > 3 %}
            <span class="tag-more">+{{ item.tags|length - 3 }}</span>
            {% endif %}
        </div>
    </div>
    
    <div class="card-meta">
        <div class="card-rating">
            {% set filled = item.rating|default(0)|int %}
            {% for i in range(5) %}
            <span class="star {{ 'filled' if i < filled else '' }}">â˜…</span>
            {% endfor %}
        </div>
        <div class="card-stats">
            <span class="stat" title="Times used">{{ item.usage_count|default(0) }}Ã—</span>
        </div>
    </div>
    
    <div class="card-actions">
        {% if library_type == 'recipes' %}
        <button class="btn-use" hx-post="/api/assets/from-recipe/{{ item.id }}" 
                hx-target="#card-chain" onclick="showPage('assets')">
            Use
        </button>
        {% else %}
        <button class="btn-add" title="Add to chain (fills first empty slot)" data-asset-id="{{ item.id }}" data-asset-name="{{ item.name|e }}" onclick="addToChain(this.dataset.assetId, this.dataset.assetName)">+</button>
        {% endif %}
        <button class="btn-preview" title="Preview (viewport only)"
                onclick="previewItem('{{ item.id }}', '{{ library_type }}')">
            ğŸ‘
        </button>
    </div>
</div>
{% endfor %}
{% else %}
<div class="empty-state">
    <p>No items found. Try adjusting your search or filters.</p>
</div>
{% endif %}
